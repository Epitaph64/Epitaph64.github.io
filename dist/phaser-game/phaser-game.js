window.onload=function(){function e(){n.load.spritesheet("tileset","/img/phaser-game/tileset.png",16,16)}function o(){n.physics.startSystem(Phaser.Physics.P2JS),n.stage.backgroundColor="#666666";for(var e=0;l>e;e++)for(var o=0;b>o;o++)c[e][o]=1;for(e=1;l-1>e;e++)for(o=1;b-1>o;o++)Math.random()<.9&&(c[e][o]=0);for(e=0;l>e;e++)for(o=0;b>o;o++)switch(c[e][o]){case 1:tile_block=n.add.sprite(32*e+16,32*o+16,"tileset",3),tile_block.scale.setTo(2,2),n.physics.p2.enable(tile_block),tile_block.body["static"]=!0,tile_block.body.fixedRotation=!0;break;default:tile_block=n.add.sprite(32*e,32*o,"tileset",48),tile_block.scale.setTo(2,2)}d=n.add.sprite(d.x,d.y,"tileset",11),d.scale.setTo(2,2),n.physics.p2.enable(d),d.body.setZeroDamping(),d.body.fixedRotation=!0}function t(){d.body.setZeroVelocity(),n.input.keyboard.isDown(Phaser.Keyboard.A)?a():n.input.keyboard.isDown(Phaser.Keyboard.D)&&i(),n.input.keyboard.isDown(Phaser.Keyboard.W)?r():n.input.keyboard.isDown(Phaser.Keyboard.S)&&s()}function a(){d.body.moveLeft(250)}function i(){d.body.moveRight(250)}function r(){d.body.moveUp(250)}function s(){d.body.moveDown(250)}for(var n=new Phaser.Game(800,576,Phaser.AUTO,"phaser-test",{preload:e,create:o,update:t},!1,!1),d={x:80,y:436},l=Math.floor(25),b=Math.floor(18.75),c=new Array(l),y=0;l>y;y++)c[y]=new Array(b)};